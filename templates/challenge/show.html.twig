{% extends 'base.html.twig' %}

{% block title %}Challenge{% endblock %}

{% block body %}
    <div class="page-heading normal-space">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <h6><span>{{ challenge.DateC ? challenge.DateC|date('d M Y') : '' }}</span></h6>
          <h2>{{ challenge.Title }}</h2>
          <img src={{ asset('http://localhost/img/'~challenge.PathIMG) }} alt="" style="border-radius: 20px; max-width: 200px;" height=200>
          <h6>{{ challenge.Description }}</h6>
          <span>Level : {{ challenge.Niveau }}</span>
          <div class="buttons">
            <div class="main-button">
              <a>Participate</a>
            </div>
            <div class="border-button">
              <a href="create.html">Show Participations</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

{{ form_start(form,{'attr': {'novalidate': 'novalidate'}} ) }}
  <div class="item-details-page">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="section-heading">
            <div class="line-dec"></div>
            <h2>Apply For <em>Your Participation</em> Here.</h2>
          </div>
        </div>
        <div class="col-lg-12">

            <div class="row" style="color:white; margin-top:20px">
              <div class="col-lg-12">
                <fieldset>
                  <label style="color:white;" for={{form.Description.vars.id}}>Description</label>
                  <input style="width: 100%; background:transparent; border-color:#7453FC; border-radius: 25px; padding:5px;color:white;border-width: 10px; margin-top:5px;" type="title" value="{{form.Description.vars.value}}" name={{form.Description.vars.full_name}} id={{form.Description.vars.id}} placeholder="Ex. Lyon King" autocomplete="on" required>
                  {% do form.Description.setRendered %}
                </fieldset>
              </div>

              <div class="col-lg-4" style="margin-top:20px">
                <fieldset>
                  <label style="color:white;" for={{form.Image.vars.id}}>Your Image</label>
                  <input style="background-color:#7453FC; cursor:pointer;border-color:#7453FC; border-radius: 20px; padding:10px; padding-left:20px; color:white;border-width: 10px; width:100%; height:100%; margin-top:5px" type="file" id={{form.Image.vars.id}} name={{form.Image.vars.full_name}} />
                  {% do form.Image.setRendered %}
                </fieldset>
              </div>

              <div class="col-lg-12" style="margin-top:20px">
                <fieldset style="display:flex; justify-content:center;">
                  <p/>
                  <button type="submit" id="form" class="orange-button">Submit Your Applying</button>
                </fieldset>
              </div>
              
            </div>

        </div>
        {{ form_end(form) }}

        <div class="col-lg-12">
          <div class="section-heading">
            <div class="line-dec"></div>
            <h2>This Is The List Of <em>Participations</em></h2>  
          </div>
        </div>

        {% for p in challenge.participations %}
          <div class="col-lg-7">
            <div class="left-image">
              <img src={{ asset('http://localhost/img/'~p.getIMGParticipation()) }} alt="" style="border-radius: 20px; max-height:70%; padding-top:20px;">
            </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
          </div>          
          <div class="col-lg-5 align-self-center">
            <span class="author">
              <img src="assets/images/author-02.jpg" alt="" style="max-width: 50px; border-radius: 50%;">
              <h6> {{ p.getIdUser().getName() }} {{ p.getIdUser().getLastName() }} <br><a href="/"> @{{ p.getIdUser().getNickname()}}</a></h6>
            </span>
            <p>{{ p.getDescription() }}</p>
            <div class="row">
              <div class="col-4">
                <span class="bid">
                  Current Rate<br><strong>4 Stars</strong><br>
                </span>
              </div>
              <div class="col-8">
                <span class="bid">
                  
                {#
                  {form_start(formrating,{ 'attr' : {'novalidate': 'novalidate'}} ) }}
                    <td style="padding-left:10px;"> <label style="color:white">Rate</label> </td>
                    <td style="padding-left:10px;"> {{ form_widget(formrating.rating, { attr:{'class':'margin-left:10px'}}) }} </td>
                    <td style="padding-left:10px;"> {{ form_errors(formrating.rating) }} </td>
                    <button>rate</button>
                {{form_end(formrating)}
                #}
              </div>
            </div>
          </div>
        {%else%}
          <p> no Participation Yet </p>
        {%endfor%}

      </div>
    </div>
  </div>

    <a href="{{ path('app_challenge_index') }}">back to list</a>

    <a href="{{ path('app_challenge_edit', {'id': challenge.id}) }}">edit</a>

{% endblock %}
